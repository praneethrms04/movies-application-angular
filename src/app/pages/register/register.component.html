<div *ngIf="errorMsg">
  <app-error-display [errorMessage]="errorMsg" (customEvent)="errorCancel()" />
</div>

<div *ngIf="successMsg">
  <app-success [successMsg]="successMsg" (customEvent)="successCancel()" />
</div>

<app-loader *ngIf="setLoading" />

<div class="container pt-5">
  <div class="row">
    <div class="col">
      <div class="d-flex align-items-center">
        <img
          src="https://knowledgemission.kerala.gov.in/img/official-login.jpg"
          alt=""
          width="400px"
          height="400px"
        />
      </div>
    </div>
    <div class="col d-flex justify-content-center align-items-center w-100">
      <form
        class="formstyle w-75 100"
        [formGroup]="registerForm"
        (ngSubmit)="onRegister()"
      >
        <div class="text-center">
          <h3>Register</h3>
        </div>
        <div class="form-group mt-3">
          <input
            type="text"
            class="form-control"
            placeholder="Name"
            formControlName="name"
            [ngClass]="{
              'danger-box':
                registerForm.get('name')?.invalid &&
                registerForm.get('name')?.touched
            }"
          />
          <div
            *ngIf="
              registerForm.get('name')?.invalid &&
              registerForm.get('name')?.touched
            "
          >
            <p
              *ngIf="registerForm.get('name')?.errors?.['required']"
              class="text-danger"
            >
              Name is required.
            </p>
          </div>
        </div>
        <div class="form-group mt-3">
          <input
            type="text"
            class="form-control"
            placeholder="UserId"
            formControlName="userId"
            [ngClass]="{
              'danger-box':
                registerForm.get('userId')?.invalid &&
                registerForm.get('userId')?.touched
            }"
          />
          <div
            *ngIf="
              registerForm.get('userId')?.invalid &&
              registerForm.get('userId')?.touched
            "
          >
            <p
              *ngIf="registerForm.get('userId')?.errors?.['required']"
              class="text-danger"
            >
              UserId is required.
            </p>
          </div>
        </div>
        <div class="form-group mt-3">
          <input
            type="text"
            class="form-control"
            placeholder="Email"
            formControlName="email"
            [ngClass]="{
              'danger-box':
                registerForm.get('email')?.invalid &&
                registerForm.get('email')?.touched
            }"
          />
        </div>

        <div
          *ngIf="
            (registerForm.get('email')?.invalid &&
              registerForm.get('email')?.touched) ||
            registerForm.get('email')?.dirty
          "
        >
          <div
            *ngIf="
              registerForm.get('email')?.invalid &&
              registerForm.get('email')?.touched
            "
          >
            <p
              *ngIf="registerForm.get('email')?.errors?.['required']"
              class="text-danger"
            >
              Email is required.
            </p>
            <p
              *ngIf="registerForm.get('email')?.errors?.['pattern']"
              class="text-danger"
            >
              Enter valid email
            </p>
          </div>
        </div>

        <div class="form-group mt-3">
          <input
            type="text"
            class="form-control"
            placeholder="Password"
            formControlName="password"
            [ngClass]="{
              'danger-box':
                registerForm.get('password')?.invalid &&
                registerForm.get('password')?.touched
            }"
          />

          <div
            *ngIf="
              registerForm.get('password')?.invalid &&
              registerForm.get('password')?.touched
            "
          >
            <p
              *ngIf="registerForm.get('password')?.errors?.['required']"
              class="text-danger"
            >
              Password is required.
            </p>
            <p
              *ngIf="registerForm.get('password')?.errors?.['pattern']"
              class="text-danger"
            >
              Password must contain at least 8 characters, one uppercase letter,
              one lowercase letter, one numeric digit, and one special
              character.
            </p>
          </div>
        </div>

        <div class="form-control mt-3 d-flex justify-content-around">
          <label for="" class="d-flex settoright me-3">UserType </label>
          <select formControlName="userTypes" class="w-100 h-75">
            <option value="CUSTOMER">Customer</option>
            <option value="ADMIN">Admin</option>
          </select>
        </div>
        <div class="form-group mt-3 text-center">
          <button
            type="submit"
            class="btn btn-primary w-50"
            [disabled]="registerForm.invalid"
          >
            Register
          </button>
        </div>
        <div class="pt-3 text-center">
          <h5>
            Do you have an account ?
            <span class="text-primary pointer" (click)="gotoLogin()">
              Login
            </span>
          </h5>
        </div>
      </form>
    </div>
  </div>
</div>
